# 测试计划文档

> 版本：1.0.0
> 更新日期：2026-02-02
> 状态：Phase 1 MVP

---

## 1. 测试策略

### 1.1 测试层次

```
┌─────────────────────────────────────────┐
│         用户验收测试 (UAT)               │  用户执行，验证业务场景
├─────────────────────────────────────────┤
│          集成测试 (E2E)                  │  端到端流程验证
├─────────────────────────────────────────┤
│          功能测试 (Functional)           │  单个功能点验证
├─────────────────────────────────────────┤
│          环境测试 (Environment)          │  依赖组件验证
└─────────────────────────────────────────┘
```

### 1.2 测试范围

| 测试类型 | 覆盖范围 | 执行方式 |
|----------|----------|----------|
| 环境测试 | scrcpy、AHK、输入容器 | 手动 |
| 功能测试 | 各个功能需求点 | 手动 |
| 集成测试 | 完整输入流程 | 手动 |
| 兼容性测试 | 目标应用适配 | 手动 |
| 可靠性测试 | 连续操作稳定性 | 手动 |

---

## 2. 环境测试用例

### TC-ENV-001: scrcpy 启动验证

| 属性 | 值 |
|------|-----|
| 目的 | 验证 scrcpy 能正常启动并连接手机 |
| 前置条件 | 手机通过 USB 连接，USB 调试已开启 |

**测试步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 打开命令行，进入 scrcpy 目录 | 命令行就绪 |
| 2 | 执行启动命令 | 控制台输出设备信息 |
| 3 | 观察 scrcpy 窗口 | 窗口显示手机屏幕 |
| 4 | 在 scrcpy 窗口点击 | 手机响应触摸 |

**启动命令**：
```bash
.\scrcpy -K --shortcut-mod=ralt --max-fps 165 -b 20M -w
```

**结果记录**：

| 项目 | 结果 | 备注 |
|------|------|------|
| 设备识别 | □ 通过 □ 失败 | |
| 画面显示 | □ 通过 □ 失败 | |
| 触摸响应 | □ 通过 □ 失败 | |

---

### TC-ENV-002: 剪贴板同步验证

| 属性 | 值 |
|------|-----|
| 目的 | 验证 scrcpy 剪贴板双向同步功能 |
| 前置条件 | scrcpy 已启动并连接 |

**测试步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 在手机便签中输入 "剪贴板测试ABC123" | 文字输入成功 |
| 2 | 长按 → 全选 → 复制 | 内容复制到手机剪贴板 |
| 3 | 在 PC 打开记事本 | 记事本窗口打开 |
| 4 | 按 Ctrl+V | 粘贴出 "剪贴板测试ABC123" |
| 5 | 在 PC 记事本输入 "PC端测试XYZ" | 文字输入成功 |
| 6 | 全选并复制 | 内容复制到 PC 剪贴板 |
| 7 | 在 scrcpy 中打开手机便签 | 便签 App 打开 |
| 8 | 长按 → 粘贴 | 粘贴出 "PC端测试XYZ" |

**结果记录**：

| 项目 | 结果 | 延迟时间 | 备注 |
|------|------|----------|------|
| 手机→PC | □ 通过 □ 失败 | ___ms | |
| PC→手机 | □ 通过 □ 失败 | ___ms | |

---

### TC-ENV-003: HID 键盘验证

| 属性 | 值 |
|------|-----|
| 目的 | 验证 PC 键盘快捷键能正确发送到手机 |
| 前置条件 | scrcpy 已启动，使用 -K 参数 |

**测试步骤**：

| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 在 scrcpy 窗口激活状态 | scrcpy 为活动窗口 |
| 2 | 在手机便签中输入 "测试全选功能" | 文字显示 |
| 3 | 按 PC 键盘 Ctrl+A | 手机上的文字被全选（高亮） |
| 4 | 按 PC 键盘 Ctrl+C | 内容复制到剪贴板 |
| 5 | 新建便签，按 Ctrl+V | 粘贴出之前的内容 |

**结果记录**：

| 快捷键 | 结果 | 备注 |
|--------|------|------|
| Ctrl+A | □ 通过 □ 失败 | |
| Ctrl+C | □ 通过 □ 失败 | |
| Ctrl+V | □ 通过 □ 失败 | |
| Backspace | □ 通过 □ 失败 | |

---

### TC-ENV-004: 输入容器 App 验证

| 属性 | 值 |
|------|-----|
| 目的 | 验证选定的输入容器 App 满足需求 |
| 前置条件 | 候选 App 已安装 |

**测试项**：

| App 名称 | 启动速度 | Ctrl+A | Ctrl+C | 界面简洁 | 推荐 |
|----------|----------|--------|--------|----------|------|
| 小米便签 | □ 快 □ 慢 | □ 是 □ 否 | □ 是 □ 否 | □ 是 □ 否 | □ |
| Google Keep | □ 快 □ 慢 | □ 是 □ 否 | □ 是 □ 否 | □ 是 □ 否 | □ |
| 纯纯写作 | □ 快 □ 慢 | □ 是 □ 否 | □ 是 □ 否 | □ 是 □ 否 | □ |

**最终选定**：_________________

---

## 3. 功能测试用例

### TC-FUNC-001: 唤起热键 (Alt+Space)

| 属性 | 值 |
|------|-----|
| 需求追溯 | FR-001, FR-002, FR-003 |
| 前置条件 | scrcpy 已运行，AHK 脚本已启动 |

**测试步骤**：

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 打开 Word，输入一些文字 | Word 窗口激活 | |
| 2 | 将光标定位到文档中间 | 光标闪烁 | |
| 3 | 按 Alt+Space | scrcpy 窗口激活 | |
| 4 | 观察窗口位置 | 窗口在屏幕中央 | |
| 5 | 观察窗口大小 | 宽 400px，高 700px | |
| 6 | 观察输入区 | 之前的内容被清空 | |
| 7 | 观察输入法 | 豆包输入法弹出 | |

**验证点**：

| 验证项 | 结果 | 备注 |
|--------|------|------|
| 窗口激活延迟 < 500ms | □ 通过 □ 失败 | |
| 窗口居中 | □ 通过 □ 失败 | |
| 窗口大小正确 | □ 通过 □ 失败 | |
| 输入区清空 | □ 通过 □ 失败 | |

---

### TC-FUNC-002: 上屏热键 (Ctrl+Enter)

| 属性 | 值 |
|------|-----|
| 需求追溯 | FR-004, FR-005 |
| 前置条件 | 已通过 TC-FUNC-001，scrcpy 窗口激活 |

**测试步骤**：

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 在 scrcpy 中输入 "测试上屏功能" | 文字显示 | |
| 2 | 按 Ctrl+Enter | 开始上屏流程 | |
| 3 | 观察 scrcpy 窗口 | 窗口最小化 | |
| 4 | 观察 Word 窗口 | Word 重新激活 | |
| 5 | 观察 Word 内容 | 出现 "测试上屏功能" | |
| 6 | 观察光标位置 | 在原来的位置 | |

**验证点**：

| 验证项 | 结果 | 备注 |
|--------|------|------|
| 内容完整复制 | □ 通过 □ 失败 | |
| scrcpy 最小化 | □ 通过 □ 失败 | |
| 原窗口激活 | □ 通过 □ 失败 | |
| 内容正确粘贴 | □ 通过 □ 失败 | |
| 总延迟 < 1000ms | □ 通过 □ 失败 | |

---

### TC-FUNC-003: scrcpy 未运行时的处理

| 属性 | 值 |
|------|-----|
| 需求追溯 | FR-001 异常处理 |
| 前置条件 | scrcpy 未运行，AHK 脚本已启动 |

**测试步骤**：

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 确保 scrcpy 未运行 | 任务栏无 scrcpy 图标 | |
| 2 | 按 Alt+Space | 弹出提示框 | |
| 3 | 观察提示内容 | 提示 "请先启动 scrcpy" | |
| 4 | 点击确定 | 提示框关闭 | |
| 5 | 观察当前窗口 | 保持在原窗口 | |

---

### TC-FUNC-004: 空内容上屏

| 属性 | 值 |
|------|-----|
| 需求追溯 | 边界条件 |
| 前置条件 | scrcpy 窗口激活，输入区为空 |

**测试步骤**：

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 确保输入区为空 | 无任何文字 | |
| 2 | 按 Ctrl+Enter | 执行上屏流程 | |
| 3 | 观察原窗口 | 无内容粘贴（或粘贴空） | |
| 4 | 观察系统状态 | 无错误，正常返回 | |

---

### TC-FUNC-005: 特殊字符上屏

| 属性 | 值 |
|------|-----|
| 需求追溯 | 边界条件 |
| 前置条件 | scrcpy 窗口激活 |

**测试数据**：

| 测试内容 | 预期 |
|----------|------|
| `换行测试\n第二行` | 保留换行 |
| `emoji测试 😀🎉` | emoji 正确显示 |
| `符号测试 <>&"'` | 符号正确显示 |
| `中英混合 Hello世界` | 完整显示 |

**测试步骤**：对每种测试数据执行完整的唤起→输入→上屏流程

**结果记录**：

| 测试内容 | 结果 | 备注 |
|----------|------|------|
| 换行 | □ 通过 □ 失败 | |
| Emoji | □ 通过 □ 失败 | |
| 特殊符号 | □ 通过 □ 失败 | |
| 中英混合 | □ 通过 □ 失败 | |

---

## 4. 集成测试用例

### TC-E2E-001: 完整语音输入流程

| 属性 | 值 |
|------|-----|
| 目的 | 验证使用豆包语音输入的完整流程 |
| 场景 | 在 Word 中用语音输入一段话 |

**测试步骤**：

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 打开 Word，新建文档 | 空白文档 | |
| 2 | 按 Alt+Space | scrcpy 窗口居中显示 | |
| 3 | 点击豆包输入法麦克风图标 | 开始录音 | |
| 4 | 说 "今天天气真不错，适合出去散步" | 识别并显示文字 | |
| 5 | 等待识别完成 | 文字显示正确 | |
| 6 | 按 Ctrl+Enter | 上屏完成 | |
| 7 | 检查 Word 内容 | 内容与说的一致 | |

**成功标准**：
- [ ] 语音识别准确率 > 95%
- [ ] 上屏内容完整
- [ ] 总流程耗时 < 5 秒（不含说话时间）

---

### TC-E2E-002: 完整 AI 润色流程

| 属性 | 值 |
|------|-----|
| 目的 | 验证使用豆包 AI 润色功能的完整流程 |
| 场景 | 在微信中发送 AI 润色后的消息 |

**测试步骤**：

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 打开微信，选择一个聊天窗口 | 聊天界面显示 | |
| 2 | 点击输入框 | 光标闪烁 | |
| 3 | 按 Alt+Space | scrcpy 窗口显示 | |
| 4 | 输入 "明天开会记得来" | 文字显示 | |
| 5 | 使用豆包 AI 功能润色 | AI 返回润色结果 | |
| 6 | 选择润色后的文字 | 文字更新 | |
| 7 | 按 Ctrl+Enter | 上屏完成 | |
| 8 | 检查微信输入框 | 润色后的内容显示 | |
| 9 | 点击发送 | 消息发送成功 | |

---

## 5. 兼容性测试

### TC-COMPAT-001: 目标应用兼容性

**测试方法**：在每个目标应用中执行完整的唤起→输入→上屏流程

| 应用 | 版本 | 唤起 | 上屏 | 粘贴格式 | 备注 |
|------|------|------|------|----------|------|
| Microsoft Word | ___ | □ 通过 □ 失败 | □ 通过 □ 失败 | □ 纯文本 □ 富文本 | |
| 微信 PC 版 | ___ | □ 通过 □ 失败 | □ 通过 □ 失败 | □ 纯文本 □ 富文本 | |
| Chrome 浏览器 | ___ | □ 通过 □ 失败 | □ 通过 □ 失败 | □ 纯文本 □ 富文本 | |
| VS Code | ___ | □ 通过 □ 失败 | □ 通过 □ 失败 | □ 纯文本 □ 富文本 | |
| 记事本 | ___ | □ 通过 □ 失败 | □ 通过 □ 失败 | □ 纯文本 | |
| 飞书 | ___ | □ 通过 □ 失败 | □ 通过 □ 失败 | □ 纯文本 □ 富文本 | |

---

## 6. 可靠性测试

### TC-REL-001: 连续操作测试

| 属性 | 值 |
|------|-----|
| 目的 | 验证连续多次操作的稳定性 |
| 目标 | 10 次操作成功率 ≥ 90% |

**测试记录表**：

| 次数 | 唤起 | 清空 | 输入 | 上屏 | 粘贴 | 整体 | 备注 |
|------|------|------|------|------|------|------|------|
| 1 | □ | □ | □ | □ | □ | □ 成功 □ 失败 | |
| 2 | □ | □ | □ | □ | □ | □ 成功 □ 失败 | |
| 3 | □ | □ | □ | □ | □ | □ 成功 □ 失败 | |
| 4 | □ | □ | □ | □ | □ | □ 成功 □ 失败 | |
| 5 | □ | □ | □ | □ | □ | □ 成功 □ 失败 | |
| 6 | □ | □ | □ | □ | □ | □ 成功 □ 失败 | |
| 7 | □ | □ | □ | □ | □ | □ 成功 □ 失败 | |
| 8 | □ | □ | □ | □ | □ | □ 成功 □ 失败 | |
| 9 | □ | □ | □ | □ | □ | □ 成功 □ 失败 | |
| 10 | □ | □ | □ | □ | □ | □ 成功 □ 失败 | |

**统计**：

- 成功次数：___/10
- 成功率：___%
- 是否达标：□ 是 □ 否

**失败原因分析**：

| 失败次数 | 失败阶段 | 原因分析 | 改进建议 |
|----------|----------|----------|----------|
| | | | |

---

## 7. 缺陷跟踪

### 缺陷记录模板

| 字段 | 值 |
|------|-----|
| 缺陷ID | BUG-XXX |
| 发现日期 | YYYY-MM-DD |
| 严重程度 | 致命/严重/一般/轻微 |
| 测试用例 | TC-XXX-XXX |
| 描述 | |
| 复现步骤 | |
| 预期结果 | |
| 实际结果 | |
| 状态 | 新建/处理中/已修复/已验证/关闭 |

### 缺陷列表

| ID | 描述 | 严重程度 | 状态 |
|----|------|----------|------|
| | | | |

---

## 8. 测试报告模板

### Phase 1 MVP 测试报告

**测试概要**：

| 项目 | 值 |
|------|-----|
| 测试日期 | |
| 测试人员 | |
| 测试环境 | Windows __, scrcpy 3.3.3, AHK v2.0 |

**测试结果汇总**：

| 测试类型 | 用例数 | 通过 | 失败 | 通过率 |
|----------|--------|------|------|--------|
| 环境测试 | 4 | | | |
| 功能测试 | 5 | | | |
| 集成测试 | 2 | | | |
| 兼容性测试 | 6 | | | |
| 可靠性测试 | 1 | | | |
| **合计** | 18 | | | |

**结论**：

- [ ] 测试通过，可以发布
- [ ] 测试不通过，需要修复后重测

**遗留问题**：

| 问题 | 影响 | 计划 |
|------|------|------|
| | | |
